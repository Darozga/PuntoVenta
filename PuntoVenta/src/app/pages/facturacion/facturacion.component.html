<p-toast ></p-toast>

<div class="container">
   

    <div class="card mt-3">
      <div class="card-header">
        <b>Facturaci贸n</b>
      </div>
      <div class="card-body">
        <div class="container">
          <form ngNativeValidate class="row" [formGroup]="mformularioFacturacion" (ngSubmit)="onAgregar()">
              <div class="mb-3  col-9 col-sm-2">
                <label for="codigo" class="form-label">C贸digo</label>
                <input type="text" class="form-control" formControlName="codigo" id="codigo"  (keyup)="efindArticulo()" required>
              </div>
              <div class="mb-3 col-9 col-sm-6">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" formControlName="nombre" id="nombre" >
              </div>
              <div class=" mb-3  col-9 col-sm-2">
                <label for="cantidad" class="form-label">Cantidad</label>
                <input type="number" min="1" class="form-control" formControlName="cantidad" id="cantidad"  required>   
              </div>
              <div class="mb-3 col-9 col-sm-2 d-grid gap-2" style="margin-top: 30px;">
                <button type="submit" class="btn btn-primary">Agregar</button>
              </div>
            </form>
          </div>
      </div>
      
    </div>

    <div class="card mt-2">
      <div class="card-header">
        <b>Detalle Facturaci贸n</b> 
      </div>
      <div class="card-body">
        <p-table [value]="listadoDetalleFactura">
          <ng-template pTemplate="header">
              <tr>
                  <th>C贸digo</th>
                  <th>Nombre</th>
                  <th>Precio</th>
                  <th>IVA</th>
                  <th>Cantidad</th>
                  <th>Total</th>

              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-detalle>
            <tr>
              <td>{{detalle.articuloId}}</td>
              <td>{{detalle.nombre}}</td>
              <td>{{formatCurrency(detalle.precio)}}</td>
              <td>{{formatCurrency(detalle.iva)}}</td>
              <td>{{detalle.cantidad}}</td>
              <td>{{formatCurrency(detalle.total)}}</td>
          </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
                <td colspan="5">Total</td>
                <td>{{formatCurrency(totalFactura)}}</td>
            </tr>
        </ng-template>
      </p-table>
      <div class="row justify-content-end">
      <div class="col-12 col-sm-2 align-self-end d-grid gap-2">
      <button type="button" (click)="onImprimir()" class="btn btn-primary mt-2" >Imprimir</button>
    </div>
  </div>
      </div>
   
    </div>
</div>
